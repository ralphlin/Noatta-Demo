<!DOCTYPE html>
<html>
<!-- BioPlugin ActiveX control to capture finger data -->
<OBJECT ID="BioPlugInActX" WIDTH=0 HEIGHT=0 CLASSID="CLSID:05E8280C-D45A-494F-AE42-840A40444AFF">
<param name="_Version" value="65536">
<param name="_ExtentX" value="2646">
<param name="_ExtentY" value="2646">
<param name="_StockProps" value="0">
</OBJECT>

  <head>
    <title><%= @title %></title>
    <%= csrf_meta_tag %>
    <%= render 'layouts/stylesheets' %>
    <%= javascript_include_tag "application" %>
    <%= javascript_include_tag "curvycorners.js" %>
    <script language="javascript" type="text/javascript">
    checkin=false;
    payscan=false;
    function Identify()
    {
      BioPlugInActX.IdentifyQuick(0);
    }

    function scanIn(uid)
    {
      var targetURL = 'http://localhost:3000/scanin/'
      window.location.replace(targetURL + uid); 
    }

    function scanPay(uid)
    {
      var targetURL = 'http://localhost:3000/paymentconfirmation/'
      var amount = <%= params[:amounttopay] %>
      window.location.replace(targetURL + uid + "/" + amount); 
    }
    </script>


    <script language="javascript" type="text/javascript" for="BioPlugInActX" event="OnIdentify()" >
      var foundID = BioPlugInActX.result;
      if ((foundID == "000000000") | (foundID == "-1"))
      {
        alert("User not found!");
        window.location.replace('http://localhost:3000/clientdemo');
      }
      else
      { 
        if ( checkin === true )
        {
          checkin=false;
          scanIn(foundID);
        }
        if ( payscan === true )
        {
          payscan=false;
          scanPay(foundID);
        }
      }
    </script>

  </head>
  <body>
    <div class="container">
      <%= render 'layouts/header' %>
      <section class="round">
        <% flash.each do |key, value| %>
          <div class="flash <%= key %>"><%= value %></div>
        <% end %>
        <%= yield %>
      </section>
      <%= debug(params) if Rails.env.development? %>
    </div>
  </body>
</html>